hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else if(i %in% tag){
next()
}
hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
hogar.cadena2<-c()
for (i in 1:814){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else if(i %in% tag){
print("hola")
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
for (i in 1:814){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
print(tag)
}else if(i %in% tag){
print("hola")
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
?next
hogar.cadena2<-c()
for (i in 1:814){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
print(tag)
}else {
if(i %in% tag)
print("hola")
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
hogar.cadena2<-c()
for (i in 1:814){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
if(i %in% tag)
print("hola")
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
hogar.cadena2<-c()
for (i in 1:25){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
#if(i %in% tag)
print(i, ": ", tag)
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
print(1,2)
print(c(1,2))
hogar.cadena2<-c()
for (i in 1:25){
tag<-0
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
#if(i %in% tag)
print(c(i, ": ", tag))
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
tag<-0
for (i in 1:25){
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
#if(i %in% tag)
print(c(i, ": ", tag))
# next()
}
#hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
hogar.cadena2<-c()
tag<-0
for (i in 1:25){
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
if(i %in% tag)
next()
hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
}
tag<-0
for (i in 1:815){
if(grepl("^\\d{1,2}\\.$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
if(i %in% tag)
next()
hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
}
hogar.cadena2
hogar.cadena2<-c()
tag<-0
for (i in 1:815){
if(grepl("^\\d{1,2}\\.\\d?$",hogar.cadena[i])
& grepl("^\\d+\\..+$", hogar.cadena[i+1]))
{
#print("hello")
tmp<-paste0(hogar.cadena[i], hogar.cadena[i+1], collapse="")
hogar.cadena2<-c(hogar.cadena2, tmp)
tag<-c(i,i+1)
}else {
if(i %in% tag)
next()
hogar.cadena2<-c(hogar.cadena2, hogar.cadena[i])
}
}
hogar.cadena2
3.5*8
965*2+600
965*2+600-1200
#knitr::opts_chunk$set(echo = TRUE, python.reticulate=F )
#Complete the following statements regarding the GYTS
YEAR           <- "2017"
LAST.YEAR      <- "2002, 2008 y 2012"
COUNTRY        <- "Panamá"
WHO.REGION     <- "OMS y de la Organización Panamericana de la Salud (OPS)"
PREPARED.BY    <- "Hedley Knewjen Quintana MD MSc PhD (Instituto Conmemorativo Gorgas de Estudios de la Salud), Fulvia Bajura DMD MSc (Dirección de Planificación, Ministerio de Salud de Panamá) y Reina Roa MD MSc (Dirección de Planificación, Ministerio de Salud de Panamá)"
INCOME.TYPE    <- "medio alto"
LOCAL.LANGAUGE <- "español"
NUMBER.OF.NATIONAL.OR.REGIONAL.TOBACCO.POLICIES.that.align.with.MPOWER.recommendations <-5
SAMPLE.TYPE     <- "nacional" #Country, region or city
GRADE          <- "7^mo^ a 9^no^ grado"
SCHOOLTYPE    <- "todas las escuelas públicas y privadas"
if (length(unlist(strsplit(LAST.YEAR, split=","))) > 1 ){
veces<- paste(" fue realizada ",length(unlist(strsplit(LAST.YEAR, split=","))), "veces",split="")
}else if (length(unlist(strsplit(LAST.YEAR, split=","))) == 0){
veces<- " se realiza por primera vez este año"
}else{
veces<- paste(" se realiza por segunda vez este año, siendo la vez anterior", LAST.YEAR)
}
OTHER.SURVEYS<-paste("Además de la EMTJ, en", COUNTRY, "se realizaron las siguientes encuestas y estudios en materia de control de tabaco, todas ellas publicadas en la página web del Instituto Conmemorativo Gorgas de Estudios para la Salud en el siguiente [enlace](http://www.gorgas.gob.pa/SitioWebTabaco/Publicaciones.htm).")
#START.GUNA.YALA<-
#END.GUNA.YALA<-
START<- "octubre"
END<-"noviembre"
#Instalando paquetes
if(!("readxl" %in% installed.packages()))
install.packages("readxl")
if(!("survey" %in% installed.packages()))
install.packages("survey")
if(!("gtools" %in% installed.packages()))
install.packages("gtools")
library(readxl)
library(survey)
library(gtools)
library(ggplot2)
library(RODBC)
country <- read_excel("Database/PANAMA_17.xlsx")
attach(country)
country$comp.13.14<-ifelse(CR1==3,0,NA)
country$comp.13.14[ CR1==4 ]<-1
country$comp.14.15<-ifelse(CR1==4,0,NA)
country$comp.14.15[ CR1==5 ]<-1
country$comp.13.15<-ifelse(CR1==3,0,NA)
country$comp.13.15[ CR1==5 ]<-1
attach(country)
pers.campo<-c(6,6,4,9,1,5,3,3,3,5)
#Para llenar la tabla 1, se requiere usar el documento denominado '2017 GYTS COUNTRY (REGION) Sampling Description.doc'.
Escuelas.selectas<-51
Escuelas.participantes<-51
Salones.selectos<-116
Salones.participantes<-115
Estudiantes.selectos<-3108
Estudiantes.participantes<-2621
#Tasas de respuesta
Respuesta.escuelas<-Escuelas.participantes/Escuelas.selectas
Respuesta.salones<-Salones.participantes/Salones.selectos
Respuesta.estudiantes<-Estudiantes.participantes/Estudiantes.selectos
Respuesta.global<-Respuesta.escuelas*Respuesta.salones*Respuesta.estudiantes
source("scripts/Indicators according to GYTS Analysis and Reporting Packagev1_1_Jan_2015.R")
source("scripts/Additional indicators for the GYTS.R")
source("scripts/Numero.R")
source("scripts/Create survey object.R")
source("scripts/funcion auxiliar.R")
source("scripts/Table 2.R")
attach(country)
country$SHISHASESSION<-ifelse(is.na(CSMKNAR) | CSMKNAR==0 ,  NA, SR4)
country$SHISHASESSION[country$SHISHASESSION == 1]<-NA
detach(country)
source("scripts/Create survey object.R")
shisha.sessions<-round(prop.table(svytable(~SHISHASESSION, country.svy))*100,1)
# svychisq(~SHISHASESSION+CR2, country.svy)
# svychisq(~SHISHASESSION+CR1, country.svy)
#shisha.sessions.sex<-round(prop.table(svytable(~SHISHASESSION+CR2, country.svy),2)*100,1)
attach(country)
country$SHISHASUCEPT<-ifelse(is.na(SR14)| is.na(ETOB) | ETOB==1 |SR14==1,NA,0)
country$SHISHASUCEPT[ETOB==0 & SR14 %in% 2:3  ]<-1
detach(country)
source("scripts/Create survey object.R")
source("scripts/Table 3.R")
source("scripts/Table 4.R")
source("scripts/lugar.R")
source("scripts/Table 5.R")
source("scripts/Table 7.R")
source("scripts/Table 6_5.R")
source("scripts/Table 6.R")
source("scripts/Table 8.R")
source("scripts/Table 9_5.R")
source("scripts/Table 9.R")
source("scripts/Table 10.R")
source("scripts/Table 11.R")
source("scripts/Table 12.R")
source("scripts/Table 13.R")
source("scripts/Table 14.R")
source("scripts/Table 15.R")
source("scripts/Table 16.R")
source("scripts/Table 19_5.R")
source("scripts/Table 17.R")
source("scripts/Table 18.R")
country$CORE19_22<-ifelse(is.na(country$CORE19) |is.na(country$CORE20)|is.na(country$CORE21) |is.na(country$CORE22),NA,0)
country$CORE19_22[ country$CORE19==1 |  country$CORE20==1| country$CORE21==1  | country$CORE22==1 ]<-1
source("scripts/Create survey object.R")
CORE19_22.all<-prettyNum(round(prop.table(svytable(~CORE19_22, country.svy))[2]*100,1), nsmall=1)
CORE19_22.all.ci<-attributes(svyciprop(~CORE19_22, country.svy))$ci
source("scripts/historico.R")
table(Panama.Historico$CR1)
source("scripts/historico.R")
prop.table(svytable(~Edad+Sexo, Panama.Historico))
prop.table(svytable(~CTOB, Panama.Historico))
prop.table(svytable(~CTOB+yr, Panama.Historico),1)
prop.table(svytable(~CTOB+yr, Panama.Historico),2)
svychisq(~CTOB+yr, Panama.Historico)
prop.trend.test(svytable(~CTOB+yr, Panama.Historico))
prop.trend.test(n=svytable(~CTOB+yr, Panama.Historico))
prop.trend.test
?prop.trend.test
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[,1],n=svytable(~yr, Panama.Historico))
svytable(~CTOB+yr, Panama.Historico)[,1]
svytable(~CTOB+yr, Panama.Historico)[1,]
svytable(~CTOB+yr, Panama.Historico)
svytable(~yr, Panama.Historico)
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[,2],n=svytable(~yr, Panama.Historico),1:4)
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[2:4,2],n=svytable(~yr, Panama.Historico)[2:4],1:4)
svytable(~CTOB+yr, Panama.Historico)[,2]
svytable(~CTOB+yr, Panama.Historico)[2,]
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[2,],n=svytable(~yr, Panama.Historico),1:4)
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[2,2:4],n=svytable(~yr, Panama.Historico)[2:4],1:4)
prop.trend.test(x=svytable(~CTOB+yr, Panama.Historico)[2,2:4],n=svytable(~yr, Panama.Historico)[2:4],1:3)
q("no")
data(cars);attach(cars)
plot(speed,dist)
abline(dist~speed)
abline(lm(dist~speed))
lm(dist~speed)
max(speed)
plot(speed,dist, ylim=c(-20, 30))
plot(speed,dist, ylim=c(-20, 45))
max(dist)
plot(speed,dist, ylim=c(-20, 130))
abline(lm(dist~speed))
summary(lm(dist~speed))
library(Rcmdr)
data(CO2)
names(CO2)
summary(CO2$uptake)
glm(Plant~update,CO2, family = binomial)
glm(Plant~update,data=CO2, family = binomial)
glm(Plant~uptake,data=CO2, family = binomial)
exp(coef(glm(Plant~uptake,data=CO2, family = binomial)))
install.packages("forestplot")
require("forestplot")
#library(readxl)
library(survey)
library(gtools)
library(ggplot2)
library(RODBC)
conn<- odbcConnectAccess("Database/PANAMA_WEB 2002.MDB")
conn<- odbcConnectAccess("Database/GYTS 2017 Panama (National).MDB")
sqlTables(con)
sqlTables(conn)
load("C://Users/Hedley/Downloads/GATS.RData")
library(survey)
GATS.svy<-svydesign(ids=~UPM_DOM, strata=~gatsstrata,  weights=~gatsweight, data=GATS)
datos.GATS.Region<-prop.table(svytable(~A01+Region, GATS.svy),2)
setwd("../Desktop")
svymean(~A03, GATS.svy)
svymean(~A03, GATS.svy, na.rm=T)
max(GATS$A03)
max(GATS$A03, na.rm=T)
datos.GATS.Region.joven<-prop.table(svytable(~A01+Region, subset(A03 <60,GATS.svy),2)
)
datos.GATS.Region.joven<-prop.table(svytable(~A01+Region, subset(A03 <60,GATS.svy)),2))
datos.GATS.Region.joven<-prop.table(svytable(~A01+Region, subset(A03 <60,GATS.svy)),2)
datos.GATS.Region.joven<-prop.table(svytable(~A01+Region, subset(~A03 <60,GATS.svy)),2)
datos.GATS.Region.joven<-prop.table(svytable(~A01+Region, subset(GATS.svy, A03 < 60)),2)
datos.GATS.Region.joven
datos.GATS.Region.viejo<-prop.table(svytable(~A01+Region, subset(GATS.svy, A03 >= 60)),2)
datos.GATS.Region.viejo
setwd("../Desktop")
nombres.region<-<-c("Bocas del Toro", "Coclé", "Colón",
"Chiriquí", "Darién", "Herrera", "Los Santos",
"Veraguas", "Guna Yala", "Ngäbe-Buglé",
"Panamá MEtro", "Panamá Este", "Panamá Oeste", "San Miguelito")
nombres.region<-c("Bocas del Toro", "Coclé", "Colón",
"Chiriquí", "Darién", "Herrera", "Los Santos",
"Veraguas", "Guna Yala", "Ngäbe-Buglé",
"Panamá MEtro", "Panamá Este", "Panamá Oeste", "San Miguelito")
nombres.region
dimnames(datos.GATS.Region.joven)$Region<-nombres.region
dimnames(datos.GATS.Region.viejo)$Region<-nombres.region
datos.GATS.Region.joven
datos.GATS.Region.viejo
joven<-c(286,365, 390,
404,350+43,429, 474,
390,36,38,
444+365, 375, 395, 395)
length(joven)==length(nombres.region)
joven*datos.GATS.Region.joven
joven
round(joven*datos.GATS.Region.joven)
datos.GATS.Region.joven[1,]
datos.GATS.Region.joven
joven.hombre<-datos.GATS.Region.joven[1,]
joven.hombre
joven.hombre<-datos.GATS.Region.joven[1,]*joven
joven.hombre
joven.hombre<-round(datos.GATS.Region.joven[1,]*joven)
joven.hombre
joven.mujer<-round(datos.GATS.Region.joven[2,]*joven)
joven.mujer
15988*.01
joven.hombre
datos.GATS.Region.joven[1,]
datos.GATS.Region.joven[2,]
datos.GATS.Region.viejo[1,]
GATS$joven<- GATS$A03 < 60
GATS.svy<-svydesign(ids=~UPM_DOM, strata=~gatsstrata,  weights=~gatsweight, data=GATS)
svymean(~A03, GATS.svy, na.rm=T)
prop.table(svytable(~A01+Region+joven, GATS.svy))
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy))
dimnames(GATS.Region.sexo)
setwd("../Desktop")
nombres.region<-c("Bocas del Toro", "Coclé", "Colón",
"Chiriquí", "Darién", "Herrera", "Los Santos",
"Veraguas", "Guna Yala", "Ngäbe-Buglé",
"Panamá Metro", "Panamá Este", "Panamá Oeste", "San Miguelito")
GATS.Region.sexo
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),3)
GATS.Region.sexo
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),1:2)
GATS.Region.sexo
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),1:2)[,,1]
GATS.Region.sexo
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),3)[,,1]
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),1:2)[1,,]
GATS.Region.sexo
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),1:2)[,1,]
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),c(1,3))[,1,]
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),2)[,1,]
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),2)[,2,]
sum(GATS.Region.sexo)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),2)
sum(GATS.Region.sexo)
GATS.Region.sexo
dimnames(GATS.Region.sexo)$Region
dimnames(GATS.Region.sexo)$Region<-nombres.region
GATS.Region.sexo
0.28638745+0.25192790+0.13611065+0.32557400
load("C://Users/Hedley/Downloads/GATS.RData")
library(survey)
GATS$joven<- GATS$A03 < 60
GATS.svy<-svydesign(ids=~UPM_DOM, strata=~gatsstrata,  weights=~gatsweight, data=GATS)
GATS.Region.sexo<-prop.table(svytable(~A01+Region+joven, GATS.svy),2)
setwd("../Desktop")
nombres.region<-c("Bocas del Toro", "Coclé", "Colón",
"Chiriquí", "Darién", "Herrera", "Los Santos",
"Veraguas", "Guna Yala", "Ngäbe-Buglé",
"Panamá Metro", "Panamá Este", "Panamá Oeste", "San Miguelito")
dimnames(GATS.Region.sexo)$Region<-nombres.region
GATS.Region.sexo
write.csv("GATS.Region.Sexo.csv",GATS.Region.sexo,quote=F)
write.csv(file="GATS.Region.Sexo.csv",x=GATS.Region.sexo,quote=F)
info<- "---\noutput: word_document\n---"
write.csv(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, col.names = F, row.names = F)
write.csv(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, row.names = F)
write.csv(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, col.names = F)
write.csv(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, col.names = "")
write.csv(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F)
write.table(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, row.names = F,
col.names = NA)
write.table(info, file="C:/Users/Hedley/Desktop/prueba.txt", quote=F, row.names = F)
write.table(info,
file="C:/Users/Hedley/Desktop/prueba.txt",
quote=F, col.names = NA)
names(info)<-""
write.table(info,
file="C:/Users/Hedley/Desktop/prueba.txt",
quote=F, row.names = F)
write.table(info,
file="C:/Users/Hedley/Desktop/prueba.txt",
quote=F, col.names = 1)
f<-file("C:/Users/Hedley/Desktop/prueba.txt")
cat(info, f)
close(f)
info<- c("---", "output: word_document", "---")
info<- c("---", "output: word_document", "---")
f<-file("C:/Users/Hedley/Desktop/prueba.txt")
cat(info, f)
close(f)
sink("C:/Users/Hedley/Desktop/prueba.txt")
info<- c"---\noutput: word_document\n---"
cat(info)
sink()
sink("C:/Users/Hedley/Desktop/prueba.txt")
info<- "---\noutput: word_document\n---"
cat(info)
sink()
dir.exists("Este equipo/Hedley/Memoria interna/csentry/Consumidores")
dir.exists("D:")
dir.exists("E:")
dir.exists("C:")
dir.exists("C://")
dir.exists("E://")
dir.exists("F://")
dir.exists("E://")
list.files("F://", recursive = F)
dir.exists("F://")
dir.exists("G://")
dir.exists("A://")
dir.exists("B://")
grep("lnk$", list.files())
grep("lnk$", list.files(), value)
grep("lnk$", list.files(), value=T)
grep("lnk$", list.files()[4], value=T)
grep("lnk$", list.files(), value=T)[4]
setwd(grep("lnk$", list.files(), value=T)[4])
setwd("Hedley - Acceso directo.lnk")
setwd("Hedley - Acceso directo")
setwd("Este equipo\Hedley\Memoria interna\DCIM")
setwd("Este equipo\\Hedley\\Memoria interna\\DCIM")
setwd("\\Este equipo\\Hedley\\Memoria interna\\DCIM")
#Trate de no cargas cargar librerías en un chunk, sino cargarlos desde un script
source("scripts/librerias.R")
#Trate de no crear códigos en los "chunks" sino cargar objetos desde los scripts
source("scripts/Objetos.R")
source("scripts/Funciones generadoras de texto.R")
setwd("Articulo_cientifico/")
file.rename("scripts/Funciones generafunciones generadoras de texto.R", "scripts/Funciones generadoras de texto.R")
